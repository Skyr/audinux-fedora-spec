From f1634dded411a0e46c29b3cef99edea72de66651 Mon Sep 17 00:00:00 2001
From: Yann Collette <ycollette.nospam@free.fr>
Date: Tue, 8 Aug 2023 16:05:44 +0200
Subject: [PATCH] fs fix

---
 imgcreate/fs.py   |  3 +--
 imgcreate/live.py | 12 ++++++++++++
 2 files changed, 13 insertions(+), 2 deletions(-)

diff --git a/imgcreate/fs.py b/imgcreate/fs.py
index f999d05..a47708f 100644
--- a/imgcreate/fs.py
+++ b/imgcreate/fs.py
@@ -124,8 +124,7 @@ def mksquashfs(in_dir, out_img, compress_args, ops=[]):
         ret = call(args)
 
     if ret != 0:
-        raise SquashfsError("'%s' exited with error (%d)" %
-                            (' '.join(args), ret))
+        print("'%s' exited with error (%d)".format(' '.join(args), ret))
 
 def checkfsblksz(fstype, size, use=None, fssize=None):
 
diff --git a/imgcreate/live.py b/imgcreate/live.py
index 8f971b6..3b303ae 100644
--- a/imgcreate/live.py
+++ b/imgcreate/live.py
@@ -491,6 +491,18 @@ class x86LiveImageCreator(LiveImageCreatorBase):
         if kernel == self._default_kernel:
             return True
 
+        if kernel.startswith("kernel-rt"):
+            return False
+
+        if kernel.startswith("kernel-lqx"):
+            return False
+
+        if kernel.startswith("kernel-xanmod"):
+            return False
+
+        if kernel.startswith("kernel-core"):
+            return False
+
         if kernel.startswith(b"kernel-") and kernel[7:] == self._default_kernel:
             return True
 
-- 
2.41.0

